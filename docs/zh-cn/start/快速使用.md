#### 安装插件

##### 配置`SPARK_HOME`环境变量

```bash
sudo vim /etc/profile

# === sudo vim /etc/profile ===
export SPARK_HOME=/opt/cloudera/parcels/CDH/lib/spark
export HADOOP_HOME=/opt/cloudera/parcels/CDH/lib/hadoop
# === sudo vim /etc/profile ===

source /etc/profile
```

##### 下载源码

```bash
git clone https://gitee.com/ispong/spark-star.git
# or
git clone https://github.com/ispong/spark-star.git
```
 
```bash
bash build.sh
```

> Note:
> 如果引入依赖无法下载，可指定一下镜像仓库

```xml
<repositories>
    <repository>
        <id>s01.apache.snapshots</id>
        <name>S01 Apache Development Snapshot Repository</name>
        <url>https://s01.oss.sonatype.org/content/repositories/snapshots</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>s01.apache.snapshots</id>
        <name>S01 Apache Development Snapshot Repository</name>
        <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories>
```

```xml
<dependency>
    <groupId>com.isxcode.star</groupId>
    <artifactId>star-common</artifactId>
    <version>0.0.3-SNAPSHOT</version>
</dependency>
```

##### 使用StarTemplate

```java
package com.isxcode.star.template;

import com.isxcode.star.common.pojo.entity.StarRequest;
import com.isxcode.star.common.pojo.entity.StarResponse;
import com.isxcode.star.common.template.StarTemplate;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RequestMapping
@RestController
@SpringBootApplication
public class TemplateApplication {

    private final StarTemplate starTemplate;

    public TemplateApplication(StarTemplate starTemplate) {
        this.starTemplate = starTemplate;
    }

    public static void main(String[] args) {
        SpringApplication.run(TemplateApplication.class, args);
    }

    @GetMapping("/demo")
    public StarResponse demo() {

        ExecuteConfig starRequest = ExecuteConfig.builder()
                .hasReturn(true)
                .sql("select * from rd_dev.ispong_table")
                .build();

        return starTemplate.executeSql("39.103.230.188", "30156", "key", starRequest);
    }
}
```

##### 测试

```http request
GET http://localhost:8080/demo
```

##### 返回示例

```json
```
